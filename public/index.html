<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rooster Rock Water</title>
  <link rel="stylesheet" href="CSS/main.css">
 
</head>
<body style="background-image: url(./Images/rr-normal.svg);">
    <div id="heading">
  <h1>Rooster Rock</h1>
  <h3>A website to check the water level for Rooster Rock state park.</h3>
  
  </div>

  <div id="information">
    <p>Current Level</p>
    <span> <p id="level">Loading...</p> <div id="chip">Level</div></span>

    <span><p id="high-level">Loading...</p><p id="low-level">Loading...</p></span>

   <!-- This is the message shown beneath the status-->
  <p id="message"></p>
  </div>

  <footer>
  <p>Made with ❤️ by a fellow Portlander who grew tired of googling the water level. Because why spend 5 seconds searching when you can spend 5 hours making a website?</p>
  <p><a href="https://waterdata.usgs.gov/monitoring-location/USGS-14128870/" target="_blank">Source: USGS Water Data</a></p>
</footer>

<script>
  fetch('/water-level')
    .then(res => res.json())
    .then(data => {
      document.getElementById('level').textContent = `${data.level} ft`;

      const msg = document.getElementById('message');
      const status = document.getElementById('chip');

      const lowLevel = document.getElementById('low-level');
      const highLevel = document.getElementById('high-level');

      msg.textContent = data.message;

      lowLevel.textContent = 'Low ' + data.low;
      highLevel.textContent = 'High ' + data.high;

      // Set chip text
      status.textContent = data.status;

      // Add corresponding CSS class for styling
      const statusClass = data.status.toLowerCase().replace(/\s+/g, '-'); // "Very Low" → "very-low"
      status.className = `chip ${statusClass}`;
    })
    .catch(() => {
      document.getElementById('level').textContent = 'Error loading water level.';
    });
</script>
</body>
</html>
